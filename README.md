# Node Authentication

인증에 대한 배경 지식은 notion을 참고해 주세요!

## 회원가입
1. 유저로부터 이메일과 비밀번호, 그리고 사업에서 요구하는 데이터들을 받는다
2. 데이터들을 검증한다 (이때 **정규식**이 사용될 수 있습니다)
3. 비밀번호를 암호화한다 (이때 **bcrypt**를 사용할 수 있습니다)
4. DB에 데이터들을 저장한다

## 로그인

### 서버
1. 유저로부터 이메일과 비밀번호를 받습니다.
2. 비밀번호가 맞는지 확인합니다
3. JWT를 생성하여 반환합니다.
4. session에 JWT 정보를 저장합니다. (expired_time도 함께 기록하면 좋습니다)


### 프론트
1. JWT를 받아 적절한 장소 (cookie나 local storage)에 넣습니다
2. JWT는 인증이 필요한 API를 사용할 때 header에 넣어줄 것입니다.

## 인증이 필요한 API
1. Header에서 JWT를 꺼내 session과 비교한다. 맞는 JWT인지 만료된 JWT는 아닌지
2. 올바른 유저라면 다음 로직을 실행한다

### 암호화

bcrypt는 암호화를 도와주는 모듈입니다. 만약 암호화를 직접 하고 싶으시다면 아래와 같은 방법을 사용하시면 됩니다.

> 회원가입시

1. random 문자열 생성, 이 문자열을 salt라고 부릅니다
2. 유저가 입력한 비밀번호와 salt를 문자열 연산으로 더해 적절한 해싱 알고리즘으로 해싱합니다.
3. salt와 해싱된 결과를 DB에 저장합니다.

> 로그인시

1. 해당 유저 DB에 있는 salt와 해싱 결과를 가져옵니다
2. 유저가 입력한 비밀번호에 salt를 문자열 연산으로 더하고 회원가입시 사용했던 같은 해싱 알고리즘으로 해싱합니다.
3. DB에서 가져온 해싱과 방금 계산한 해싱 문자열을 비교합니다.

### 혹시라도 Third-party 인증을 하고 싶으시다면

- passport를 찾아보세요!
- 직접 스펙에 맞춰 개발하셔도 됩니다!